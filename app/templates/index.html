{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}


{% block title %}Flasky{% endblock %}
{% block styles %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}">
<link rel="stylesheet" href="{{ url_for('static',filename='animate.css') }}">
{% endblock styles %}
{% block scripts %}
{{ super() }}
<script type="text/javascript" src="{{ url_for('static', filename='jquery.js') }}"></script>
<script>

        $(document).ready(function(e) {
            FloatAd("#floadAD");//调用
        });


        //广告漂浮窗口
        function FloatAd(selector) {
            var obj = $(selector);
            if (obj.find(".item").length == 0) return;//如果没有内容，不执行
            var windowHeight = $(window).height();//浏览器高度
            var windowWidth = $(window).width();//浏览器宽度
            var dirX = -1.5;//每次水平漂浮方向及距离(单位：px)，正数向右，负数向左，如果越大的话就会看起来越不流畅，但在某些需求下你可能会需要这种效果
            var dirY = -1;//每次垂直漂浮方向及距离(单位：px)，正数向下，负数向上，如果越大的话就会看起来越不流畅，但在某些需求下你可能会需要这种效果

            var delay = 30;//定期执行的时间间隔，单位毫秒
            obj.css({ left: windowWidth / 2 - obj.width() / 2 + "px", top: windowHeight / 2 - obj.height() / 2 + "px" });//把元素设置成在页面中间
            obj.show();//元素默认是隐藏的，避免上一句代码改变位置视觉突兀，改变位置后再显示出来
            var handler = setInterval(move, delay);//定期执行，返回一个值，这个值可以用来取消定期执行
            //上句中，move不能写成move()或"move()"形式
            obj.hover(function() {//鼠标经过时暂停，离开时继续
                clearInterval(handler);//取消定期执行
            }, function() {
                handler = setInterval(move, delay);
            });

            obj.find(".close").click(function() {//绑定关闭按钮事件
                close();
            });
            $(window).resize(function() {//当改变窗口大小时，重新获取浏览器大小，以保证不会过界（飘出浏览器可视范围）或漂的范围小于新的大小
                windowHeight = $(window).height();//浏览器高度
                windowWidth = $(window).width();//浏览器宽度
            });
            function move() {//定期执行的函数，使元素移动
                var currentPos = obj.position();//获取当前位置，这是JQuery的函数，具体见：http://hemin.cn/jq/position.html
                var nextPosX = currentPos.left + dirX;//下一个水平位置
                var nextPosY = currentPos.top + dirY;//下一个垂直位置

                if (nextPosX >= windowWidth - obj.width()) {//这一段是本站特有的需求，当漂浮到右边时关闭漂浮窗口，如不需要可删除
                    close();
                }

                if (nextPosX <= 0 || nextPosX >= windowWidth - obj.width()) {//如果达到左边，或者达到右边，则改变为相反方向
                    dirX = dirX * -1;//改变方向
                    nextPosX = currentPos.left + dirX;//为了不过界，重新获取下一个位置
                }
                if (nextPosY <= 0 || nextPosY >= windowHeight - obj.height() - 5) {//如果达到上边，或者达到下边，则改变为相反方向。
                    dirY = dirY * -1;//改变方向
                    nextPosY = currentPos.top + dirY;//为了不过界，重新获取下一个位置
                }
                obj.css({ left: nextPosX + "px", top: nextPosY + "px" });//移动到下一个位置
            }

             function close() {//停止漂浮，并销毁漂浮窗口
                 clearInterval(handler);
                 obj.remove();
             }
        }

</script>
<script>
    $(document).ready(function(e) {
            Closetag(".fixed");//调用
        });
    $(document).ready(function(e) {
            Closetag(".fixed2");//调用
        });

    function Closetag(selector) {
    var obj = $(selector);
    obj.find('.close2').click(function () {
        close();
    });
    function close() {
        clearInterval(handler);
        obj.remove();
    }
}
</script>
<script>
    $(function(){
        $('#666').on('click',function () {
            $('.fixed').addClass('animated fadeOutLeft');
            $('.fixed2').addClass('animated fadeOutLeft');
        });
    });
</script>
{% endblock %}


{% block page_content %}
<!-- 欢迎，登陆页面 -->
<div class="page-header">
    <div class="jumbotron">
        <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1>你好,{% if current_user.is_authenticated %}{{ current_user.username }}{% else %}新同学{% endif %}!</h1>
                <p>欢迎来到湖南师范大学学生信息管理系统</p>
                <p><a class="btn btn-primary btn-lg" role="button" href="http://www.hunnu.edu.cn/" target="_blank">
                学校官网了解更多</a>
                </p>
                <a href="http://portals.zhihuishu.com/hunnu/shareCourse" target="_blank">智慧树网络课程</a>
            </div>
            {% if current_user.is_authenticated %}




            {% else %}
            <div class="col-md-4">
                <fieldset>
                {{ wtf.quick_form(form) }}
                </fieldset>
                <br>
                <p><a href="{{ url_for('auth.password_reset_request') }}" style="font-size: medium">忘记密码？</a>.</p>
                <p style="font-size: medium">新同学? <a href="{{ url_for('auth.register') }}" style="font-size: medium">立即注册</a>.</p>
            </div>
            {% endif %}
        </div>
        </div>
    </div>
</div>
{% if not current_user.is_authenticated %}
<div class="fixed2 animated fadeInLeft">
    <p>我的作品</p>
</div>

<div class="fixed animated fadeInLeft">
    <p><a href="{{ url_for('main.guopage') }}" target="_blank">个人主页</a></p>
    <p><a href="{{ url_for('main.calculator') }}" t>计算器</a></p>
    <p><a href="#">还没做出来</a></p>
    <a id="666" class="close" href="javascript:void(0);" style="color: red">×关闭</a>
</div>

<div id="floadAD" class="floadAd">
    <a class="close" href="javascript:void(0);">×关闭</a>
    <a class="item" title='文化节' href="http://jky.hunnu.edu.cn/" target="_blank">
    <img src="http://ww1.sinaimg.cn/thumb300/420cf682jw1f85mkcammvj20ku0rsjw8.jpg" alt="文化节" /></a>
</div>
{% endif %}
<!-- 最近通知 -->
<div class="col-md-12">
    <div data-spy="scroll" data-offset="0"
	 style="height:200px;overflow:auto; position: relative;">
	<h4>2016-2017第二学期选课时间：</h4>
	<p>1.咸嘉湖校区本科生选课开始时间：12月17日（周六）18：30（仅限开设在咸嘉湖校区的课程）
	</p>
	<p>2.2013级本科生选课开始时间：12月18日（周日）8：30
	</p>
	<p>3.2014级本科生选课开始时间：12月18日（周日）18：30
	</p>
	<p>4.2015级本科生选课开始时间：12月19日（周一）18：30
	</p>
	<p>5.2016级本科生选课开始时间：12月20日（周二）18：30
	</p>
    <p>6.2013级师范生教师教育类选修课选课开始时间：12月21日（周三）18：00
	</p>
    <p>7.2014级师范生教师教育类选修课选课开始时间：12月22日（周四）18：00，其中，刘铁芳老师主讲的《教育哲学》将开展慕课教学试点，选修人数限40人，仅供2014级师范生选修。
	</p>
    <p>8.2015级师范生教师教育类选修课选课开始时间：12月23日（周五）18：00
	</p>
    <p>9.选课结束时间：12月25日（周日）18：00
	</p>
    </div>
</div>
{% endblock %}
